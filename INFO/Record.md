---
created: 2025-01-31-18-19-03+10:00
tags:
---
В C# (начиная с версии 9.0) появилась возможность использовать **record** — это специальный тип данных, который упрощает создание неизменяемых (immutable) объектов, предназначенных для хранения данных. Records предоставляют удобный синтаксис для работы с объектами, которые в основном используются как контейнеры данных. Вот основные причины, зачем они нужны:

---

### 1. **Упрощение создания неизменяемых объектов**

- Records автоматически генерируют свойства только для чтения (`init`-свойства), что делает их идеальными для создания неизменяемых объектов. Это полезно, когда вам нужно гарантировать, что данные объекта не изменятся после его создания.
    
- Пример:
    
    ```
    public record Person(string FirstName, string LastName);
    ```
    
    Здесь `FirstName` и `LastName` автоматически становятся свойствами только для чтения.
    

---

### 2. **Автоматическая генерация методов** `Equals`, `GetHashCode` и `ToString`

- Records автоматически генерируют методы `Equals`, `GetHashCode` и `ToString` на основе значений свойств. Это упрощает сравнение объектов и их использование в коллекциях, таких как `Dictionary` или `HashSet`.
    
- Пример:
    
    ```
    var person1 = new Person("John", "Doe");
    var person2 = new Person("John", "Doe");
    Console.WriteLine(person1 == person2); // True, потому что значения свойств одинаковы
    ```
    

---

### 3. **Поддержка деконструкции**

- Records позволяют легко "разбирать" объект на отдельные переменные с помощью деконструкции.
    
- Пример:
    
    ```
    var person = new Person("John", "Doe");
    var (firstName, lastName) = person;
    Console.WriteLine(firstName); // John
    Console.WriteLine(lastName);  // Doe
    ```
    

---

### 4. **Синтаксический сахар для создания объектов**

- Records предоставляют компактный и удобный синтаксис для создания объектов. Вам не нужно писать конструкторы, свойства и методы вручную.
    
- Пример:
    
    ```
    public record Person(string FirstName, string LastName);
    ```
    
    Этот код автоматически создает конструктор, свойства и методы.
    

---

### 5. **Поддержка наследования**

- Records поддерживают наследование, что позволяет создавать иерархии типов. Это полезно, когда вам нужно расширять функциональность объектов.
    
- Пример:
    
    ```
    public record Person(string FirstName, string LastName);
    public record Employee(string FirstName, string LastName, string Department) : Person(FirstName, LastName);
    ```
    

---

### 6. **Идеально для DTO (Data Transfer Objects)**

- Records отлично подходят для создания DTO, которые используются для передачи данных между слоями приложения (например, между сервером и клиентом). Они неизменяемы, легко сериализуются и имеют минимальный boilerplate-код.
    
- Пример:
    
    ```
    public record ProductDto(int Id, string Name, decimal Price);
    ```
    

---

### 7. **Сравнение по значению (Value-based equality)**

- В отличие от классов, которые сравниваются по ссылке, records сравниваются по значению. Это означает, что два объекта record считаются равными, если их свойства имеют одинаковые значения.
    
- Пример:
    
    ```
    var person1 = new Person("John", "Doe");
    var person2 = new Person("John", "Doe");
    Console.WriteLine(person1 == person2); // True
    ```
    

---

### 8. **Поддержка** `with`-выражений

- Records позволяют легко создавать копии объектов с измененными значениями с помощью `with`-выражений. Это особенно полезно для работы с неизменяемыми объектами.
    
- Пример:
    
    ```
    var person1 = new Person("John", "Doe");
    var person2 = person1 with { LastName = "Smith" };
    Console.WriteLine(person2); // Person { FirstName = John, LastName = Smith }
    ```